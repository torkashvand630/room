/*! tinyColorPicker - v1.1.1 2016-08-30 */
!function(n,t){"object"==typeof exports?module.exports=t(n):"function"==typeof define&&define.amd?define("colors",[],function(){return t(n)}):n.Colors=t(n)}(this,function(n,t){"use strict";function c(n,u,f,e,o){var u,s;if("string"==typeof u)u=r.txt2color(u),f=u.type,i[f]=u[f],o=o!==t?o:u.alpha;else if(u)for(s in u)n[f][s]=v(u[s]/l[f][s][1],0,1);return o!==t&&(n.alpha=v(+o,0,1)),y(f,e?n:t)}function w(n,t,i){var e=f.options.grey,r={};return r.RGB={r:n.r,g:n.g,b:n.b},r.rgb={r:t.r,g:t.g,b:t.b},r.alpha=i,r.equivalentGrey=o(e.r*n.r+e.g*n.g+e.b*n.b),r.rgbaMixBlack=s(t,{r:0,g:0,b:0},i,1),r.rgbaMixWhite=s(t,{r:1,g:1,b:1},i,1),r.rgbaMixBlack.luminance=u(r.rgbaMixBlack,!0),r.rgbaMixWhite.luminance=u(r.rgbaMixWhite,!0),f.options.customBG&&(r.rgbaMixCustom=s(t,f.options.customBG,i,1),r.rgbaMixCustom.luminance=u(r.rgbaMixCustom,!0),f.options.customBG.luminance=u(f.options.customBG,!0)),r}function y(n,t){var et,nt,tt,h=t||i,lt=r,d=f.options,ot=l,g=h.RND,it="",st="",at={hsl:"hsv",rgb:n},c=g.rgb,a;if("alpha"!==n){for(a in ot)if(!ot[a][a]){n!==a&&(st=at[a]||"rgb",h[a]=lt[st+"2"+a](h[st]));g[a]||(g[a]={});et=h[a];for(it in et)g[a][it]=o(et[it]*ot[a][it][1])}c=g.rgb;h.HEX=lt.RGB2HEX(c);h.equivalentGrey=d.grey.r*h.rgb.r+d.grey.g*h.rgb.g+d.grey.b*h.rgb.b;h.webSave=nt=p(c,51);h.webSmart=tt=p(c,17);h.saveColor=c.r===nt.r&&c.g===nt.g&&c.b===nt.b?"web save":c.r===tt.r&&c.g===tt.g&&c.b===tt.b?"web smart":"";h.hueRGB=r.hue2RGB(h.hsv.h);t&&(h.background=w(c,h.rgb,h.alpha))}var rt,ut,v,ht=h.rgb,ct=h.alpha,y="luminance",ft=h.background;return rt=s(ht,{r:0,g:0,b:0},ct,1),rt[y]=u(rt,!0),h.rgbaMixBlack=rt,ut=s(ht,{r:1,g:1,b:1},ct,1),ut[y]=u(ut,!0),h.rgbaMixWhite=ut,d.customBG&&(v=s(ht,ft.rgbaMixCustom,ct,1),v[y]=u(v,!0),v.WCAG2Ratio=k(v[y],ft.rgbaMixCustom[y]),h.rgbaMixBGMixCustom=v,v.luminanceDelta=e.abs(v[y]-ft.rgbaMixCustom[y]),v.hueDelta=b(ft.rgbaMixCustom,v,!0)),h.RGBLuminance=u(c),h.HUELuminance=u(h.hueRGB),d.convertCallback&&d.convertCallback(h,n),h}function p(n,t){var u={},i=0,f=t/2;for(var r in n)i=n[r]%t,u[r]=n[r]+(i>f?t-i:-i);return u}function b(n,t,i){return(e.max(n.r-t.r,t.r-n.r)+e.max(n.g-t.g,t.g-n.g)+e.max(n.b-t.b,t.b-n.b))*(i?255:1)/765}function u(n,t){for(var u=t?1:255,i=[n.r/u,n.g/u,n.b/u],o=f.options.luminance,r=i.length;r--;)i[r]=i[r]<=.03928?i[r]/12.92:e.pow((i[r]+.055)/1.055,2.4);return o.r*i[0]+o.g*i[1]+o.b*i[2]}function s(n,i,r,u){var e={},f=r!==t?r:1,s=u!==t?u:1,h=f+s*(1-f);for(var o in n)e[o]=(n[o]*f+i[o]*s*(1-f))/h;return e.a=h,e}function k(n,t){var i=1;return i=n>=t?(n+.05)/(t+.05):(t+.05)/(n+.05),o(100*i)/100}function v(n,t,i){return n>i?i:t>n?t:n}var l={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},e=n.Math,o=e.round,f={},i={},d={r:.298954,g:.586434,b:.114612},g={r:.2126,g:.7152,b:.0722},h=function(n){this.colors={RND:{}};this.options={color:"rgba(0,0,0,0)",grey:d,luminance:g,valueRanges:l};nt(this,n||{})},nt=function(n,u){var f,e=n.options,o;a(n);for(o in u)u[o]!==t&&(e[o]=u[o]);f=e.customBG;e.customBG="string"==typeof f?r.txt2color(f).rgb:f;i=c(n.colors,e.color,t,!0)},a=function(n){f!==n&&(f=n,i=n.colors)},r;return h.prototype.setColor=function(n,i,r){return a(this),n?c(this.colors,n,i,t,r):(r!==t&&(this.colors.alpha=v(r,0,1)),y(i))},h.prototype.setCustomBackground=function(n){return a(this),this.options.customBG="string"==typeof n?r.txt2color(n).rgb:n,c(this.colors,t,"rgb")},h.prototype.saveAsBackground=function(){return a(this),c(this.colors,t,"rgb",!0)},h.prototype.toString=function(n,t){return r.color2text((n||"rgb").toLowerCase(),this.colors,t)},r={txt2color:function(n){var t={},u=n.replace(/(?:#|\)|%)/g,"").split("("),e=(u[1]||"").split(/,\s*/),i=u[1]?u[0].substr(0,3):"rgb",o="",f;if(t.type=i,t[i]={},u[1])for(f=3;f--;)o=i[f]||i.charAt(f),t[i][o]=+e[f]/l[i][o][1];else t.rgb=r.HEX2rgb(u[0]);return t.alpha=e[3]?+e[3]:1,t},color2text:function(n,t,i){var r=i!==!1&&o(100*t.alpha)/100,u="number"==typeof r&&i!==!1&&(i||1!==r),f=t.RND.rgb,e=t.RND.hsl,s="hex"===n&&u,h="hex"===n&&!s,l="rgb"===n||s,c=l?f.r+", "+f.g+", "+f.b:h?"#"+t.HEX:e.h+", "+e.s+"%, "+e.l+"%";return h?c:(s?"rgb":n)+(u?"a":"")+"("+c+(u?", "+r:"")+")"},RGB2HEX:function(n){return((n.r<16?"0":"")+n.r.toString(16)+(n.g<16?"0":"")+n.g.toString(16)+(n.b<16?"0":"")+n.b.toString(16)).toUpperCase()},HEX2rgb:function(n){return n=n.split(""),{r:+("0x"+n[0]+n[n[3]?1:0])/255,g:+("0x"+n[n[3]?2:1]+(n[3]||n[1]))/255,b:+("0x"+(n[4]||n[2])+(n[5]||n[2]))/255}},hue2RGB:function(n){var r=6*n,i=~~r%6,t=6===r?0:r-i;return{r:o(255*[1,1-t,0,0,t,1][i]),g:o(255*[t,1,1,1-t,0,0][i]),b:o(255*[0,0,t,1,1,1-t][i])}},rgb2hsv:function(n){var f,s,h,t=n.r,r=n.g,u=n.b,o=0;return u>r&&(r=u+(u=r,0),o=-1),s=u,r>t&&(t=r+(r=t,0),o=-2/6-o,s=e.min(r,u)),f=t-s,h=t?f/t:0,{h:1e-15>h?i&&i.hsl&&i.hsl.h||0:f?e.abs(o+(r-u)/(6*f)):0,s:t?f/t:i&&i.hsv&&i.hsv.s||0,v:t}},hsv2rgb:function(n){var o=6*n.h,r=n.s,t=n.v,s=~~o,h=o-s,i=t*(1-r),u=t*(1-h*r),f=t*(1-(1-h)*r),e=s%6;return{r:[t,u,i,i,f,t][e],g:[f,t,t,u,i,i][e],b:[i,i,f,t,t,u][e]}},hsv2hsl:function(n){var t=(2-n.s)*n.v,r=n.s*n.v;return r=n.s?1>t?t?r/t:0:r/(2-t):0,{h:n.h,s:n.v||r?r:i&&i.hsl&&i.hsl.s||0,l:t/2}},rgb2hsl:function(n,t){var u=r.rgb2hsv(n);return r.hsv2hsl(t?u:i.hsv=u)},hsl2rgb:function(n){var s=6*n.h,u=n.s,r=n.l,t=.5>r?r*(1+u):r+u-u*r,i=r+r-t,l=t?(t-i)/t:0,h=~~s,a=s-h,c=t*l*a,f=i+c,e=t-c,o=h%6;return{r:[t,e,i,i,f,t][o],g:[f,t,t,e,i,i][o],b:[i,i,f,t,t,e][o]}}},h}),function(n,t){"object"==typeof exports?module.exports=t(n,require("jquery"),require("colors")):"function"==typeof define&&define.amd?define(["jquery","colors"],function(i,r){return t(n,i,r)}):t(n,n.jQuery,n.Colors)}(this,function(n,t,i,r){"use strict";function g(n){return n.value||n.getAttribute("value")||t(n).css("background-color")||"#FFF"}function k(n){return n=n.originalEvent&&n.originalEvent.touches?n.originalEvent.touches[0]:n,n.originalEvent?n.originalEvent:n}function nt(n){return t(n.find(u.doRender)[0]||n[0])}function d(i){var r=t(this),p=r.offset(),l=t(n),y=u.gap;i?(f=nt(r),f._colorMode=f.data("colorMode"),o.$trigger=r,(e||ft()).css(u.positionCallback.call(o,r)||{left:(e._left=p.left)-((e._left+=e._width-(l.scrollLeft()+l.width()))+y>0?e._left+y:0),top:(e._top=p.top+r.outerHeight())-((e._top+=e._height-(l.scrollTop()+l.height()))+y>0?e._top+y:0)}).show(u.animationSpeed,function(){i!==!0&&(c.toggle(!!u.opacity)._width=c.width(),s._width=s.width(),s._height=s.height(),v._height=v.height(),h.setColor(g(f[0])),a(!0))}).off(".tcp").on(rt,".cp-xy-slider,.cp-z-slider,.cp-alpha",et)):o.$trigger&&t(e).hide(u.animationSpeed,function(){a(!1);o.$trigger=null}).off(".tcp")}function ft(){return t("head")[u.cssPrepend?"prepend":"append"]('<style type="text/css" id="tinyColorPickerStyles">'+(u.css||yt)+(u.cssAddon||"")+"<\/style>"),t(vt).css({margin:u.margin}).appendTo("body").show(0,function(){o.$UI=e=t(this);l=u.GPU&&e.css("perspective")!==r;v=t(".cp-z-slider",this);s=t(".cp-xy-slider",this);y=t(".cp-xy-cursor",this);p=t(".cp-z-cursor",this);c=t(".cp-alpha",this);w=t(".cp-alpha-cursor",this);u.buildCallback.call(o,e);e.prepend("<div>").children().eq(0).css("width",e.children().eq(0).width());e._width=this.offsetWidth;e._height=this.offsetHeight}).hide()}function et(n){var i=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");(n.button||n.which)>1||(n.preventDefault&&n.preventDefault(),n.returnValue=!1,f._offset=t(this).offset(),(i="xy_slider"===i?ot:"z_slider"===i?st:ht)(n),a(),it.on(lt,function(){it.off(".tcp")}).on(ct,function(n){i(n);a()}))}function ot(n){var t=k(n),i=t.pageX-f._offset.left,r=t.pageY-f._offset.top;h.setColor({s:i/s._width*100,v:100-r/s._height*100},"hsv")}function st(n){var t=k(n).pageY-f._offset.top;h.setColor({h:360-t/v._height*360},"hsv")}function ht(n){var t=k(n).pageX-f._offset.left,i=t/c._width;h.setColor({},"rgb",i)}function a(n){var t=h.colors,o=t.hueRGB,i=(t.RND.rgb,t.RND.hsl,u.dark),e=u.light,a=h.toString(f._colorMode,u.forceAlpha),ut=t.HUELuminance>.22?i:e,ft=t.rgbaMixBlack.luminance>.22?i:e,d=(1-t.hsv.h)*v._height,g=t.hsv.s*s._width,nt=(1-t.hsv.v)*s._height,it=t.alpha*c._width,b=l?"translate3d":"",rt=f[0].value,k=f[0].hasAttribute("value")&&""===rt&&n!==r;s._css={backgroundColor:"rgb("+o.r+","+o.g+","+o.b+")"};y._css={transform:b+"("+g+"px, "+nt+"px, 0)",left:l?"":g,top:l?"":nt,borderColor:t.RGBLuminance>.22?i:e};p._css={transform:b+"(0, "+d+"px, 0)",top:l?"":d,borderColor:"transparent "+ut};c._css={backgroundColor:"#"+t.HEX};w._css={transform:b+"("+it+"px, 0, 0)",left:l?"":it,borderColor:ft+" transparent"};f._css={backgroundColor:k?"":a,color:k?"":t.rgbaMixBGMixCustom.luminance>.22?i:e};f.text=k?"":rt!==a?a:"";n!==r?tt(n):at(tt)}function tt(n){s.css(s._css);y.css(y._css);p.css(p._css);c.css(c._css);w.css(w._css);u.doRender&&f.css(f._css);f.text&&f.val(f.text);u.renderCallback.call(o,f,"boolean"==typeof n?n:r)}var o,h,u,f,e,v,s,y,p,c,w,it=t(document),b=t(),ct="touchmove.tcp mousemove.tcp pointermove.tcp",rt="touchstart.tcp mousedown.tcp pointerdown.tcp",lt="touchend.tcp mouseup.tcp pointerup.tcp",l=!1,at=n.requestAnimationFrame||n.webkitRequestAnimationFrame||function(n){n()},vt='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"><\/div><\/div><div class="cp-xy-slider"><div class="cp-white"><\/div><div class="cp-xy-cursor"><\/div><\/div><div class="cp-alpha"><div class="cp-alpha-cursor"><\/div><\/div><\/div>',yt=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",ut=function(n){h=this.color=new i(n);u=h.options;o=this};ut.prototype={render:a,toggle:d};t.fn.colorPicker=function(i){var f=this,r=function(){};return i=t.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:r,buildCallback:r,positionCallback:r,body:document.body,scrollResize:!0,gap:4,dark:"#222",light:"#DDD"},i),!o&&i.scrollResize&&t(n).on("resize.tcp scroll.tcp",function(){o.$trigger&&o.toggle.call(o.$trigger[0],!0)}),b=b.add(this),this.colorPicker=o||new ut(i),this.options=i,t(i.body).off(".tcp").on(rt,function(n){-1===b.add(e).add(t(e).find(n.target)).index(n.target)&&d()}),this.on("focusin.tcp click.tcp",function(n){o.color.options=t.extend(o.color.options,u=f.options);d.call(this,n)}).on("change.tcp",function(){h.setColor(this.value||"#FFF");f.colorPicker.render(!0)}).each(function(){var n=g(this),r=n.split("("),f=nt(t(this));f.data("colorMode",r[1]?r[0].substr(0,3):"HEX").attr("readonly",u.preventFocus);i.doRender&&f.css({"background-color":n,color:function(){return h.setColor(n).rgbaMixBGMixCustom.luminance>.22?i.dark:i.light}})})};t.fn.colorPicker.destroy=function(){t("*").off(".tcp");o.toggle(!1);b=t()}});